<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>MBTI ê²€ì‚¬</title>
    <style>
      body {
        max-width: 700px;
        margin: 40px auto;
        padding: 20px;
      }

      h1 {
        text-align: center;
        margin-bottom: 40px;
      }

      .question {
        background: #f9f9f9;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid #ddd;
        border-radius: 10px;
      }

      .question p {
        font-size: 18px;
        margin-bottom: 15px;
      }

      .options {
        display: flex;
        gap: 20px;
        justify-content: center;
      }

      .option {
        display: inline-block;
      }

      input[type="radio"] {
        display: none;
      }

      label {
        display: inline-block;
        padding: 12px 24px;
        background-color: #a957c2;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
      }

      input[type="radio"]:checked + label {
        background-color: #e03f65;
      }

      #result {
        margin: 40px 0;
        font-size: 20px;
        text-align: center;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <h1>ðŸ§  MBTI ê°„ë‹¨ ê²€ì‚¬</h1>
    <div id="result"></div>
    <div id="quiz"></div>

    <script>
      const questions = {
        q1: { text: "ê³ ë“±í•™êµì—ì„œ ìœ ëª…í–ˆë‚˜ìš”?", a: "E", b: "I" }, // EI
        q2: { text: "ìš´ë™(ìŠ¤í¬ì¸ )ë¥¼ í•˜ë‚˜ìš”?", a: "S", b: "N" }, // SN
        q3: { text: "ìˆ˜í•™ì„ ìž˜í•˜ë‚˜ìš”?", a: "T", b: "F" }, // TF
        q4: { text: "ì§€ê¸ˆ ë°©ì´ ê¹¨ë—í•œê°€ìš”?", a: "J", b: "P" }, // JP
      };
      const answers = {}; // ì‚¬ìš©ìžì˜ ì‘ë‹µì„ ì €ìž¥

      // ê° MBTI í•­ëª© ì„ íƒ ì‹œ ì ìˆ˜ ì¦ê°€
      const score = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

      const quizEl = document.getElementById("quiz");
      const resultEl = document.getElementById("result");
      function renderQuestions() {

        Object.entries(questions).forEach(([key, q]) => {
          const container = document.createElement("div");
          container.className = "question";

          container.innerHTML = `
                <p>${q.text}<p>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="${key}_a" name="${key}" value="${q.a}"></input>
                            <label for="${key}_a">YES</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="${key}_b" name="${key}" value="${q.b}"></input>
                            <label for="${key}_b">NO</label>
                        </div>
                    </div>
                `;

          quizEl.appendChild(container);

          container.querySelectorAll('input[type="radio"]').forEach((input) => {
            input.addEventListener("change", () => {
              // ì‚¬ìš©ìžì˜ ì„ íƒì„ answersì— ì €ìž¥
              answers[key] = input.value;

              // ëª¨ë“  ì§ˆë¬¸ì´ ë‹µë³€ë˜ë©´ ê²°ê³¼ í‘œì‹œ
              if (
                Object.keys(answers).length === Object.keys(questions).length
              ) {
                showResult();
              }
            });
          });
        });
      }

      function showResult() {
        // ì ìˆ˜ ì´ˆê¸°í™”
        for (let k in score) score[k] = 0;
        console.log(score);
        // answers ê°ì²´ì—ì„œ ê°’ì´ ìžˆëŠ” í•­ëª©ë§Œ í•„í„°ë§í•´ ìƒˆ ê°ì²´ë¡œ ë³€í™˜
        const newAnswers = Object.fromEntries(
          Object.entries(answers).filter(([_, value]) => value)
        );
        console.log(newAnswers);

        // Object.valuesë¡œ ì ìˆ˜ ê³„ì‚°
        Object.values(newAnswers).forEach((ans) => score[ans]++);
        console.log(score);
        // MBTI ê²°ì •
        const result =
          (score.E > score.I ? "E" : "I") +
          (score.S > score.N ? "S" : "N") +
          (score.T > score.F ? "T" : "F") +
          (score.J > score.P ? "J" : "P");
        console.log(result);
        // ê²°ê³¼ ì¶œë ¥
        resultEl.textContent = `MBTIëŠ” ${result} ìž…ë‹ˆë‹¤`;
      }

      renderQuestions();

    </script>
  </body>
</html>
