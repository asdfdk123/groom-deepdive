<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Object.create()</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
      }

      h2 {
        margin-top: 30px;
      }

      button {
        margin-top: 10px;
        padding: 8px 16px;
      }

      pre {
        background: #f4f4f4;
        padding: 10px;
        border-radius: 4px;
      }
    </style>
  </head>

  <body>
    <h1>Object.create()</h1>

    <!-- 1. ìƒì†í˜• ì»´í¬ë„ŒíŠ¸ -->
    <h2>ìƒì†í˜• ì»´í¬ë„ŒíŠ¸</h2>
    <button onclick="component.render()">ë Œë”ë§ í•˜ê¸°</button>
    <pre id="output1"></pre>

    <!-- 2. ì•ˆì „í•œ í•´ì‹œë§µ -->
    <h2>ì•ˆì „í•œ í•´ì‹œë§µ (Object.create(null))</h2>
    <input id="keyInput" placeholder="toStringë¥¼ í‚¤ë¡œ ì…ë ¥" />
    <input id="valueInput" placeholder="ê°’ ì…ë ¥" />
    <button onclick="addToSafeMap()">ì¶”ê°€</button>
    <pre id="output2"></pre>

    <!-- 3. ì½ê¸° ì „ìš© ì„¤ì • -->
    <h2>ì½ê¸° ì „ìš© ì„¤ì • ê°ì²´</h2>
    <input id="appName" placeholder="ì•± ì´ë¦„ ìˆ˜ì •" />
    <button onclick="tryToModify()">ì´ë¦„ ë°”ê¾¸ê¸° ì‹œë„</button>
    <p id="text"></p>
    <pre id="output3"></pre>
  </body>
  <script>
    const BaseComponent = {
      mount() {
        return "ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì™„ë£Œ";
      },
    };

    const component = Object.create(BaseComponent);
    component.render = function () {
      const result = this.mount() + "\n ë Œë”ë§ ì™„ë£Œ!";
      document.getElementById("output1").textContent = result;
    };

    const safeMap = Object.create(null);

    function addToSafeMap() {
      const key = document.getElementById("keyInput").value;
      const value = document.getElementById("valueInput").value;
      safeMap[key] = value;

      let result = "ì €ì¥ëœ í‚¤ ëª©ë¡:\n";
      for (let k in safeMap) {
        result += `â€¢ ${k} : ${safeMap[k]}\n`;
      }

      document.getElementById("output2").textContent = result;
    }

    const config = Object.create(Object.prototype, {
      appName: {
        value: "MySecureApp",
        writable: false,
        enumerable: true,
      },
    });

    document.getElementById(
      "output3"
    ).textContent = `ğŸ”’ ì„¤ì •ëœ ì´ë¦„: ${config.appName}`;

    function tryToModify() {
      console.log();
      config.appName = document.getElementById("appName").value; // ë³€ê²½ ë¶ˆê°€

      document.getElementById("text").textContent = `âœï¸ ë³€ê²½í•œ ì´ë¦„: ${
        document.getElementById("appName").value
      }`;
      document.getElementById(
        "output3"
      ).textContent = `ğŸ”’ ì„¤ì •ëœ ì´ë¦„: ${config.appName} (ë³€ê²½ ì‹œë„ ë¬´ì‹œë¨)`;
    }
  </script>
</html>
